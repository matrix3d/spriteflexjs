/**
 * Generated by Apache Royale Compiler from TestBox2D.as
 * TestBox2D
 *
 * @fileoverview
 *
 * @suppress {missingRequire|checkTypes|accessControls}
 */

goog.provide('TestBox2D');
goog.require('Box2D.Collision.Shapes.b2CircleShape');
goog.require('Box2D.Collision.Shapes.b2PolygonShape');
goog.require('Box2D.Common.Math.b2Vec2');
goog.require('Box2D.Dynamics.b2Body');
goog.require('Box2D.Dynamics.b2BodyDef');
goog.require('Box2D.Dynamics.b2DebugDraw');
goog.require('Box2D.Dynamics.b2FixtureDef');
goog.require('Box2D.Dynamics.b2World');
goog.require('SpriteFlexjs');
goog.require('flash.__native.WebGLRenderer');
goog.require('flash.display.Sprite');
goog.require('flash.events.Event');
goog.require('org.apache.royale.utils.Language');
goog.require('flash.display.Sprite');
goog.require('flash.geom.PerspectiveProjection');
goog.require('flash.display.GraphicsEndFill');
goog.require('flash.display3D.textures.CubeTexture');
goog.require('flash.net.URLRequest');
goog.require('Box2D.Collision.Shapes.b2ShapeUtil');
goog.require('flash.display3D.textures.Texture');
goog.require('flash.display.BlendMode');
goog.require('flash.system.LoaderContext');
goog.require('flash.accessibility.AccessibilityImplementation');
goog.require('Box2D.Dynamics.b2FilterData');
goog.require('flash.__native.util.Earcut');
goog.require('Box2D.Dynamics.Contacts.b2PolyAndCircleContact');
goog.require('flash.events.KeyboardEvent');
goog.require('org.villekoskela.utils.IntegerRectangle');
goog.require('Box2D.Collision.b2TOIInput');
goog.require('flash.display.GraphicsTrianglePath');
goog.require('Box2D.Collision.b2DistanceProxy');
goog.require('Box2D.Collision.b2DistanceInput');
goog.require('Box2D.Collision.b2SeparationFunction');
goog.require('Box2D.Dynamics.b2ContactManager');
goog.require('flash.text.TextFormat');
goog.require('Box2D.Dynamics.Joints.b2GearJointDef');
goog.require('Box2D.Collision.b2ContactPoint');
goog.require('Box2D.Collision.Features');
goog.require('Box2D.Dynamics.Controllers.b2Controller');
goog.require('flash.display.GraphicsStroke');
goog.require('flash.ui.ContextMenuClipboardItems');
goog.require('Box2D.Dynamics.Joints.b2JointUtil');
goog.require('flash.system.ApplicationDomain');
goog.require('Box2D.Dynamics.Joints.b2DistanceJointDef');
goog.require('Box2D.Collision.b2DynamicTreeBroadPhase');
goog.require('Box2D.Collision.Shapes.b2EdgeShape');
goog.require('flash.display3D.Context3D');
goog.require('flash.display.GradientType');
goog.require('flash.display3D.Context3DBlendFactor');
goog.require('Box2D.Dynamics.Contacts.b2ContactConstraintPoint');
goog.require('Box2D.Dynamics.Contacts.b2EdgeAndCircleContact');
goog.require('Box2D.Common.b2Color');
goog.require('flash.utils.ByteArray');
goog.require('Box2D.Collision.b2Distance');
goog.require('Box2D.Common.Math.b2Mat33');
goog.require('Box2D.Dynamics.Joints.b2WeldJointDef');
goog.require('flash.__native.te.UVTexture');
goog.require('Box2D.Collision.b2SimplexCache');
goog.require('Box2D.Dynamics.Joints.b2PrismaticJoint');
goog.require('org.villekoskela.utils.RectanglePacker');
goog.require('Box2D.Dynamics.b2ContactImpulse');
goog.require('flash.display3D.Context3DProgramType');
goog.require('flash.__native.GLVertexBufferSet');
goog.require('Box2D.Dynamics.Contacts.b2ContactFactory');
goog.require('flash.__native.te.CharSet');
goog.require('flash.ui.ContextMenuBuiltInItems');
goog.require('Box2D.Common.Math.b2Mat22');
goog.require('org.villekoskela.utils.SortableSize');
goog.require('Box2D.Dynamics.Joints.b2GearJoint');
goog.require('flash.net.URLVariables');
goog.require('flash.display3D.textures.VideoTexture');
goog.require('Box2D.Collision.b2RayCastInput');
goog.require('Box2D.Common.b2Settings');
goog.require('flash.display3D.VertexBuffer3D');
goog.require('flash.__native.GLPath2D');
goog.require('flash.filters.DropShadowFilter');
goog.require('Box2D.Collision.b2RayCastOutput');
goog.require('Box2D.Common.Math.b2Sweep');
goog.require('flash.display.StageScaleMode');
goog.require('Box2D.Collision.b2AABB');
goog.require('flash.text.TextSnapshot');
goog.require('flash.display3D.textures.RectangleTexture');
goog.require('Box2D.Dynamics.Joints.b2PulleyJointDef');
goog.require('Box2D.Collision.b2DynamicTreePair');
goog.require('Box2D.Common.Math.b2Vec3');
goog.require('Box2D.Collision.b2OBB');
goog.require('Box2D.Common.Math.b2Math');
goog.require('Box2D.Dynamics.Joints.b2FrictionJointDef');
goog.require('flash.display.LoaderInfo');
goog.require('flash.geom.Point');
goog.require('Box2D.Common.Math.b2Transform');
goog.require('Box2D.Dynamics.Controllers.b2ControllerEdge');
goog.require('flash.utils.getTimer');
goog.require('Box2D.Dynamics.Joints.b2DistanceJoint');
goog.require('Box2D.Collision.b2DistanceOutput');
goog.require('Box2D.Collision.b2Manifold');
goog.require('flash.display3D.Context3DVertexBufferFormat');
goog.require('flash.text.TextField');
goog.require('flash.display3D.Context3DCompareMode');
goog.require('Box2D.Dynamics.Joints.b2RevoluteJointDef');
goog.require('flash.__native.GLIndexBufferSet');
goog.require('flash.__native.te.Char');
goog.require('flash.__native.te.LineInfo');
goog.require('flash.accessibility.AccessibilityProperties');
goog.require('Box2D.Dynamics.Joints.b2LineJointDef');
goog.require('flash.filters.GlowFilter');
goog.require('Box2D.Dynamics.b2ContactFilter');
goog.require('flash.display.Loader');
goog.require('Box2D.Dynamics.b2TimeStep');
goog.require('Box2D.Dynamics.Joints.b2FrictionJoint');
goog.require('Box2D.Dynamics.Joints.b2MouseJoint');
goog.require('flash.ui.ContextMenu');
goog.require('Box2D.Collision.b2DynamicTree');
goog.require('Box2D.Dynamics.Contacts.b2PositionSolverManifold');
goog.require('flash.__native.GLDrawable');
goog.require('flash.display.BitmapDataChannel');
goog.require('Box2D.Dynamics.b2Fixture');
goog.require('flash.geom.Matrix');
goog.require('flash.display.GraphicsGradientFill');
goog.require('Box2D.Dynamics.Joints.b2PrismaticJointDef');
goog.require('flash.display.StageQuality');
goog.require('flash.__native.MemArray');
goog.require('Box2D.Collision.b2WorldManifold');
goog.require('flash.text.TextFieldType');
goog.require('flash.system.SecurityDomain');
goog.require('flash.geom.Matrix3D');
goog.require('Box2D.Dynamics.Contacts.b2ContactEdge');
goog.require('flash.text.StyleSheet');
goog.require('flash.utils.Endian');
goog.require('flash.display3D.Program3D');
goog.require('Box2D.Dynamics.Joints.b2PulleyJoint');
goog.require('flash.display.Graphics');
goog.require('flash.display3D.IndexBuffer3D');
goog.require('Box2D.Dynamics.Joints.b2RevoluteJoint');
goog.require('Box2D.Collision.b2Collision');
goog.require('Box2D.Dynamics.Joints.b2MouseJointDef');
goog.require('flash.display.GraphicsPathCommand');
goog.require('flash.text.TextFieldAutoSize');
goog.require('flash.geom.ColorTransform');
goog.require('flash.__native.BitmapTexture');
goog.require('flash.geom.Transform');
goog.require('Box2D.Dynamics.Joints.b2JointEdge');
goog.require('flash.display.Bitmap');
goog.require('flash.display.GraphicsBitmapFill');
goog.require('flash.display.GraphicsSolidFill');
goog.require('flash.events.MouseEvent');
goog.require('flash.display.StageAlign');
goog.require('Box2D.Dynamics.Contacts.b2ContactConstraint');
goog.require('Box2D.Collision.b2Simplex');
goog.require('flash.display.BitmapData');
goog.require('Box2D.Collision.Shapes.b2MassData');
goog.require('Box2D.Collision.b2TimeOfImpact');
goog.require('flash.display.Stage3D');
goog.require('flash.display3D.Context3DTextureFormat');
goog.require('Box2D.Dynamics.Joints.b2WeldJoint');
goog.require('Box2D.Collision.b2SimplexVertex');
goog.require('flash.geom.Rectangle');
goog.require('flash.display.Stage');
goog.require('flash.__native.GLCanvasPattern');
goog.require('Box2D.Dynamics.Contacts.b2CircleContact');
goog.require('Box2D.Dynamics.Contacts.b2PolyAndEdgeContact');
goog.require('flash.text.TextLineMetrics');
goog.require('flash.__native.GLCanvasRenderingContext2D');
goog.require('Box2D.Collision.b2ManifoldPoint');
goog.require('Box2D.Dynamics.b2ContactListener');
goog.require('Box2D.Dynamics.b2DestructionListener');
goog.require('flash.geom.Vector3D');
goog.require('Box2D.Dynamics.Joints.b2Jacobian');
goog.require('Box2D.Dynamics.b2Island');
goog.require('flash.geom.Orientation3D');
goog.require('flash.events.TouchEvent');
goog.require('Box2D.Dynamics.Joints.b2LineJoint');
goog.require('flash.__native.GLGraphicsPath');
goog.require('Box2D.Collision.b2DynamicTreeNode');
goog.require('Box2D.Dynamics.Contacts.b2PolygonContact');
goog.require('flash.display3D.Context3DTriangleFace');
goog.require('Box2D.Dynamics.Contacts.b2ContactRegister');
goog.require('Box2D.Dynamics.Contacts.b2ContactSolver');
/* Royale Dependency List: Box2D.Collision.Shapes.b2CircleShape,Box2D.Collision.Shapes.b2PolygonShape,Box2D.Common.Math.b2Vec2,Box2D.Dynamics.b2Body,Box2D.Dynamics.b2BodyDef,Box2D.Dynamics.b2DebugDraw,Box2D.Dynamics.b2FixtureDef,Box2D.Dynamics.b2World,SpriteFlexjs,flash.__native.WebGLRenderer,flash.events.Event,org.apache.royale.utils.Language*/

goog.require('flash.display.Sprite');



/**
 * @constructor
 * @extends {flash.display.Sprite}
 */
TestBox2D = function() {
  TestBox2D.base(this, 'constructor');
  
  this.m_timeStep = 1.0 / 30.0;
  var /** @type {Box2D.Dynamics.b2BodyDef} */ bodyDef = null;
  var /** @type {Box2D.Collision.Shapes.b2PolygonShape} */ boxShape = null;
  var /** @type {Box2D.Collision.Shapes.b2CircleShape} */ circleShape = null;
  var /** @type {Box2D.Dynamics.b2Body} */ body = null;
  SpriteFlexjs.renderer = new flash.__native.WebGLRenderer();
  SpriteFlexjs.wmode = "gpu batch";
  this.addEventListener(flash.events.Event.ENTER_FRAME, org.apache.royale.utils.Language.closure(this.Update, this, 'Update'), false, 0, true);
  var /** @type {Box2D.Common.Math.b2Vec2} */ gravity = new Box2D.Common.Math.b2Vec2(0.0, 10.0);
  var /** @type {boolean} */ doSleep = true;
  this.m_world = new Box2D.Dynamics.b2World(gravity, doSleep);
  var /** @type {Box2D.Dynamics.b2DebugDraw} */ debugDraw = new Box2D.Dynamics.b2DebugDraw();
  this.TestBox2D_drawShape = new flash.display.Sprite();
  this.addChild(this.TestBox2D_drawShape);
  debugDraw.SetSprite(this.TestBox2D_drawShape);
  debugDraw.SetDrawScale(30.0);
  debugDraw.SetFillAlpha(0.3);
  debugDraw.SetLineThickness(1.0);
  debugDraw.SetFlags((Box2D.Dynamics.b2DebugDraw.e_shapeBit | Box2D.Dynamics.b2DebugDraw.e_jointBit) >>> 0);
  debugDraw.SetFlags(0xffffffff);
  this.m_world.SetDebugDraw(debugDraw);
  this.m_world.DrawDebugData();
  //var /** @type {Box2D.Dynamics.b2Body} */ body = null;
  //var /** @type {Box2D.Dynamics.b2BodyDef} */ bodyDef = null;
  //var /** @type {Box2D.Collision.Shapes.b2PolygonShape} */ boxShape = null;
  //var /** @type {Box2D.Collision.Shapes.b2CircleShape} */ circleShape = null;
  bodyDef = new Box2D.Dynamics.b2BodyDef();
  bodyDef.position.Set(10, 12);
  boxShape = new Box2D.Collision.Shapes.b2PolygonShape();
  boxShape.SetAsBox(30, 3);
  var /** @type {Box2D.Dynamics.b2FixtureDef} */ fixtureDef = new Box2D.Dynamics.b2FixtureDef();
  fixtureDef.shape = boxShape;
  fixtureDef.friction = 0.3;
  fixtureDef.density = 0;
  body = this.m_world.CreateBody(bodyDef);
  body.CreateFixture(fixtureDef);
  for (var /** @type {number} */ i = 1; i < 10; i++) {
    bodyDef = new Box2D.Dynamics.b2BodyDef();
    bodyDef.type = Box2D.Dynamics.b2Body.b2_dynamicBody;
    bodyDef.position.x = Math.random() * 15 + 5;
    bodyDef.position.y = Math.random() * 10;
    var /** @type {number} */ rX = Math.random() + 0.5;
    var /** @type {number} */ rY = Math.random() + 0.5;
    body = this.m_world.CreateBody(bodyDef);
    if (Math.random() < 0.5) {
      boxShape = new Box2D.Collision.Shapes.b2PolygonShape();
      boxShape.SetAsBox(rX, rY);
      fixtureDef.shape = boxShape;
      fixtureDef.density = 1.0;
      fixtureDef.friction = 0.5;
      fixtureDef.restitution = 0.2;
      body.CreateFixture(fixtureDef);
    } else {
      circleShape = new Box2D.Collision.Shapes.b2CircleShape(rX);
      fixtureDef.shape = circleShape;
      fixtureDef.density = 1.0;
      fixtureDef.friction = 0.5;
      fixtureDef.restitution = 0.2;
      body.CreateFixture(fixtureDef);
    }
  }
};
goog.inherits(TestBox2D, flash.display.Sprite);


/**
 * @private
 * @type {flash.display.Sprite}
 */
TestBox2D.prototype.TestBox2D_drawShape = null;


/**
 * @param {flash.events.Event} e
 */
TestBox2D.prototype.Update = function(e) {
  this.graphics.clear();
  this.graphics.beginFill(0xffffff);
  this.graphics.drawRect(0, 0, this.stage.stageWidth, this.stage.stageHeight);
  this.m_world.Step(this.m_timeStep, this.m_velocityIterations, this.m_positionIterations);
  this.m_world.DrawDebugData();
};


/**
 * @type {Box2D.Dynamics.b2World}
 */
TestBox2D.prototype.m_world = null;


/**
 * @type {number}
 */
TestBox2D.prototype.m_velocityIterations = 10;


/**
 * @type {number}
 */
TestBox2D.prototype.m_positionIterations = 10;


/**
 * @type {number}
 */
TestBox2D.prototype.m_timeStep = null;


/**
 * Metadata
 *
 * @type {Object.<string, Array.<Object>>}
 */
TestBox2D.prototype.ROYALE_CLASS_INFO = { names: [{ name: 'TestBox2D', qName: 'TestBox2D', kind: 'class' }] };



/**
 * Reflection
 *
 * @return {Object.<string, Function>}
 */
TestBox2D.prototype.ROYALE_REFLECTION_INFO = function () {
  return {
    variables: function () {
      return {
        'm_world': { type: 'Box2D.Dynamics.b2World', get_set: function (/** TestBox2D */ inst, /** * */ v) {return v !== undefined ? inst.m_world = v : inst.m_world;}},
        'm_velocityIterations': { type: 'int', get_set: function (/** TestBox2D */ inst, /** * */ v) {return v !== undefined ? inst.m_velocityIterations = v : inst.m_velocityIterations;}},
        'm_positionIterations': { type: 'int', get_set: function (/** TestBox2D */ inst, /** * */ v) {return v !== undefined ? inst.m_positionIterations = v : inst.m_positionIterations;}},
        'm_timeStep': { type: 'Number', get_set: function (/** TestBox2D */ inst, /** * */ v) {return v !== undefined ? inst.m_timeStep = v : inst.m_timeStep;}}
      };
    },
    methods: function () {
      return {
        'TestBox2D': { type: '', declaredBy: 'TestBox2D'},
        'Update': { type: 'void', declaredBy: 'TestBox2D', parameters: function () { return [ 'flash.events.Event', false ]; }}
      };
    }
  };
};
/**
 * @const
 * @type {number}
 */
TestBox2D.prototype.ROYALE_COMPILE_FLAGS = 9;
