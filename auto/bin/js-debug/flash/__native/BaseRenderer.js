/**
 * Generated by Apache Royale Compiler from flash/__native/BaseRenderer.as
 * flash.__native.BaseRenderer
 *
 * @fileoverview
 *
 * @suppress {missingRequire|checkTypes|accessControls}
 */

goog.provide('flash.__native.BaseRenderer');
/* Royale Dependency List: flash.display.BitmapData,flash.display.Graphics,flash.display.GraphicsEndFill,flash.display.GraphicsPath,flash.display.IGraphicsData,flash.geom.ColorTransform,flash.geom.Matrix,flash.text.TextField,flash.text.TextFormat,org.apache.royale.utils.Language*/

goog.require('flash.__native.IRenderer');



/**
 * @constructor
 * @extends {flash.__native.IRenderer}
 */
flash.__native.BaseRenderer = function() {
  flash.__native.BaseRenderer.base(this, 'constructor');

this.endFillInstance = new flash.display.GraphicsEndFill();
};
goog.inherits(flash.__native.BaseRenderer, flash.__native.IRenderer);


/**
 * @protected
 * @type {flash.display.GraphicsEndFill}
 */
flash.__native.BaseRenderer.prototype.endFillInstance = null;


/**
 * @override
 */
flash.__native.BaseRenderer.prototype.getCssColor = function(color, alpha, ct, toarr) {
  return "rgba(" + org.apache.royale.utils.Language._int((color >> 16 & 0xff) * ct.redMultiplier + ct.redOffset) + "," + org.apache.royale.utils.Language._int((color >> 8 & 0xff) * ct.greenMultiplier + ct.greenOffset) + "," + org.apache.royale.utils.Language._int((color & 0xff) * ct.greenMultiplier + ct.greenOffset) + "," + (alpha * ct.alphaMultiplier + ct.alphaOffset) + ")";
};


/**
 * @override
 */
flash.__native.BaseRenderer.prototype.createPath = function() {
  return new flash.display.GraphicsPath();
};


/**
 * @override
 */
flash.__native.BaseRenderer.prototype.renderGraphics = function(ctx, g, m, blendMode, colorTransform) {
  ctx.setTransform(m.a, m.b, m.c, m.d, m.tx, m.ty);
  ctx.globalCompositeOperation = blendMode;
  var /** @type {number} */ len = (g.graphicsData.length) >> 0;
  for (var /** @type {number} */ i = 0; i < len; i++) {
    var /** @type {flash.display.IGraphicsData} */ igd = g.graphicsData[i];
    igd.draw(ctx, colorTransform);
  }
  if (g.lastFill) {
    this.endFillInstance.fill = g.lastFill;
    this.endFillInstance.draw(ctx, colorTransform);
  }
  if (g.lastStroke) {
    ctx.stroke();
  }
  ctx.fillStyle = null;
  ctx.strokeStyle = null;
};


/**
 * @override
 */
flash.__native.BaseRenderer.prototype.renderImage = function(ctx, img, m, blendMode, colorTransform, offsetX, offsetY) {
  offsetX = typeof offsetX !== 'undefined' ? offsetX : 0;
  offsetY = typeof offsetY !== 'undefined' ? offsetY : 0;
  ctx.globalAlpha = colorTransform.alphaMultiplier;
  ctx.globalCompositeOperation = blendMode;
  ctx.setTransform(m.a, m.b, m.c, m.d, m.tx, m.ty);
  ctx.drawImage(img.image, offsetX, offsetY);
};


/**
 * @override
 */
flash.__native.BaseRenderer.prototype.renderVideo = function(ctx, video, m, width, height, blendMode, colorTransform) {
  ctx.globalAlpha = colorTransform.alphaMultiplier;
  ctx.globalCompositeOperation = blendMode;
  ctx.setTransform(m.a, m.b, m.c, m.d, m.tx, m.ty);
  ctx.drawImage(video, 0, 0, width, height);
};


/**
 * @override
 */
flash.__native.BaseRenderer.prototype.renderText = function(ctx, txt, textFormat, m, blendMode, colorTransform, x, y) {
  ctx.globalAlpha = colorTransform.alphaMultiplier;
  ctx.globalCompositeOperation = blendMode;
  ctx.setTransform(m.a, m.b, m.c, m.d, m.tx, m.ty);
  ctx.font = textFormat.css;
  ctx.fillStyle = textFormat.csscolor;
  ctx.textBaseline = "top";
  ctx.fillText(txt, x, y);
};


/**
 * @override
 */
flash.__native.BaseRenderer.prototype.renderRichText = function(ctx, t) {
  t.__updateCanvas(ctx);
};


/**
 * Metadata
 *
 * @type {Object.<string, Array.<Object>>}
 */
flash.__native.BaseRenderer.prototype.ROYALE_CLASS_INFO = { names: [{ name: 'BaseRenderer', qName: 'flash.__native.BaseRenderer', kind: 'class' }] };



/**
 * Reflection
 *
 * @return {Object.<string, Function>}
 */
flash.__native.BaseRenderer.prototype.ROYALE_REFLECTION_INFO = function () {
  return {
    methods: function () {
      return {
        'BaseRenderer': { type: '', declaredBy: 'flash.__native.BaseRenderer'},
        'getCssColor': { type: 'Object', declaredBy: 'flash.__native.BaseRenderer', parameters: function () { return [ 'uint', false ,'Number', false ,'flash.geom.ColorTransform', false ,'Array', false ]; }},
        'createPath': { type: 'flash.display.GraphicsPath', declaredBy: 'flash.__native.BaseRenderer'},
        'renderGraphics': { type: 'void', declaredBy: 'flash.__native.BaseRenderer', parameters: function () { return [ 'CanvasRenderingContext2D', false ,'flash.display.Graphics', false ,'flash.geom.Matrix', false ,'String', false ,'flash.geom.ColorTransform', false ]; }},
        'renderImage': { type: 'void', declaredBy: 'flash.__native.BaseRenderer', parameters: function () { return [ 'CanvasRenderingContext2D', false ,'flash.display.BitmapData', false ,'flash.geom.Matrix', false ,'String', false ,'flash.geom.ColorTransform', false ,'Number', true ,'Number', true ]; }},
        'renderVideo': { type: 'void', declaredBy: 'flash.__native.BaseRenderer', parameters: function () { return [ 'CanvasRenderingContext2D', false ,'HTMLVideoElement', false ,'flash.geom.Matrix', false ,'int', false ,'int', false ,'String', false ,'flash.geom.ColorTransform', false ]; }},
        'renderText': { type: 'void', declaredBy: 'flash.__native.BaseRenderer', parameters: function () { return [ 'CanvasRenderingContext2D', false ,'String', false ,'flash.text.TextFormat', false ,'flash.geom.Matrix', false ,'String', false ,'flash.geom.ColorTransform', false ,'Number', false ,'Number', false ]; }},
        'renderRichText': { type: 'void', declaredBy: 'flash.__native.BaseRenderer', parameters: function () { return [ 'CanvasRenderingContext2D', false ,'flash.text.TextField', false ]; }}
      };
    }
  };
};
/**
 * @const
 * @type {number}
 */
flash.__native.BaseRenderer.prototype.ROYALE_COMPILE_FLAGS = 9;
